<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product Details - Wooden Dreams</title>
  <link rel="stylesheet" href="style.css" />
  
  <script src="products.js"></script>

  <script src="product-detail.js" defer></script>
  <!-- Other HTML content above -->

  <!-- Product-related script -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      function renderDescription(descriptionArray) {
      if (Array.isArray(descriptionArray)) {
        return `<ul>${descriptionArray.map(line => `<li>${line}</li>`).join("")}</ul>`;
      } else {
        return `<p>${descriptionArray}</p>`; // fallback if not array
      }
    }
      const urlParams = new URLSearchParams(window.location.search);
      const productName = decodeURIComponent(urlParams.get("product"));

      const product = sampleProducts.find(p => p.name === productName);
      if (!product) return;

      document.getElementById("breadcrumb").innerHTML = `
        <a href="home.html">Home</a> › <a href="shop.html">Shop</a>  | <span>${product.name}</span>`;

      document.getElementById("product-name").textContent = product.name;
      document.getElementById("product-price").textContent = `₹${product.price}`;
      document.getElementById("product-desc").textContent = product.subtitle;
      //document.getElementById("product-description").textContent = product.description;
      //document.getElementById("product-description-tabs").textContent = product.description;
      document.getElementById("product-description").innerHTML = renderDescription(product.description);
document.getElementById("product-description-tabs").innerHTML = renderDescription(product.description);


      const mainImage = document.getElementById("main-image");
      mainImage.src = product.image;


      const thumbnails = document.getElementById("thumbnails");
      thumbnails.innerHTML = product.images.map((img, i) => `
        <img src="${img}" class="${i === 0 ? 'selected' : ''}" onclick="setMainImage('${img}', this)" />
      `).join("");


      window.setMainImage = function (src, thumb) {
        document.getElementById("main-image").src = src;
        document.querySelectorAll("#thumbnails img").forEach(i => i.classList.remove("selected"));
        thumb.classList.add("selected");
      };

      // Rating
      const ratingEl = document.getElementById("product-rating");
      if (product.rating) {
        const stars = Math.floor(product.rating);
        const half = product.rating - stars >= 0.5;
        ratingEl.innerHTML = "★".repeat(stars) + (half ? "½" : "") + "☆".repeat(5 - stars - (half ? 1 : 0));
      }

      // Related
      const relatedContainer = document.getElementById("related-products");
      relatedContainer.innerHTML = sampleProducts.filter(p => p.name !== product.name).map(p => `
        <div class="related-card">
          <img src="${p.image}" alt="${p.name}" />
          <h4>${p.name}</h4>
          <p>₹${p.price}</p>
          <a href="product-detail.html?product=${encodeURIComponent(p.name)}" class="quick-view">Quick View</a>
        </div>
      `).join("");

      // Add to cart functionality
      document.querySelector(".quick-view").addEventListener("click", function () {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const exists = cart.find(item => item.name === product.name);
        if (!exists) cart.push({ ...product, quantity: 1 });
        localStorage.setItem("cart", JSON.stringify(cart));
        alert(`${product.name} added to cart!`);
      });

      // Tabs
      const tabButtons = document.querySelectorAll(".tab-btn");
      const tabPanes = document.querySelectorAll(".tab-pane");

      tabButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          const tabId = btn.getAttribute("data-tab");
          tabButtons.forEach(b => b.classList.remove("active"));
          tabPanes.forEach(p => p.classList.remove("active"));
          btn.classList.add("active");
          document.getElementById(tabId).classList.add("active");
        });
      });

      // Additional Info
      const infoTab = document.getElementById("info-tab");
      if (product.additionalInfo) {
        // Generate non-swatch additional info
        const infoHtml = Object.entries(product.additionalInfo)
          .filter(([key]) => key !== "swatches")
          .map(([key, value]) =>
            `<p><strong>${key.charAt(0).toUpperCase() + key.slice(1)}:</strong> ${value}</p>`
          ).join("");

        // Add to DOM
        infoTab.innerHTML = infoHtml;

        // Generate swatch blocks
        if (product.additionalInfo.swatches && product.additionalInfo.swatches.length) {
          const swatchHTML = product.additionalInfo.swatches.map(color => `
      <div class="swatch" style="
        background-color: ${color};
        width: 20px;
        height: 20px;
        display: inline-block;
        margin: 4px 6px 4px 0;
        border: 1px solid #aaa;
        border-radius: 3px;
      " title="${color}"></div>
    `).join("");

          infoTab.innerHTML += `
      <p><strong>Color Options:</strong></p>
      <div class="swatch-container">${swatchHTML}</div>
    `;
        }
      }

    });
  </script>

  </body>

  <style>
    #product-description ul,
#product-description-tabs ul {
  padding-left: 20px;
  margin-top: 10px;
  list-style-type: disc;
}

    body {
      font-family: Inter, sans-serif;
      background: #fdf8f3;
      color: #333;
      margin: 0;
    }

    .container {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }

    .breadcrumbs {
      font-size: 14px;
      margin-bottom: 20px;
    }
 .breadcrumbs a{
  color: #b07b4c;
  font-size: large;
  text-decoration: none;
 }

 .breadcrumbs span{
  font-weight: bolder;
  color: #b07b4c;
 }
    .product-section {
      display: flex;
      gap: 40px;
      flex-wrap: wrap;
    }

    .product-images {
      flex: 1;
    }

    #main-image {
      width: 50%;
      border-radius: 8px;
    }

    #thumbnails {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    #thumbnails img {
      width: 60px;
      height: 60px;
      cursor: pointer;
      border-radius: 4px;
    }

    #thumbnails img.selected {
      outline: 2px solid #b07b4c;
    }

    .product-info {
      flex: 1;
    }

    .product-info h2 {
      margin: 0 0 10px;
      font-size: 28px;
    }

    .product-info .price {
      font-size: 22px;
      color: #b07b4c;
      margin: 10px 0;
    }

    .product-info .desc {
      margin: 15px 0;
      color: gray;
      font-weight: bolder;
    }

    #thumbnails img.selected {
      outline: 2px solid #b07b4c;
    }

    .tabs {
      margin-top: 40px;
    }

    .tab-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .tab-btn {
      background: #eee;
      border: none;
      padding: 10px 16px;
      cursor: pointer;
      border-radius: 6px 6px 0 0;
      font-weight: 600;
    }

    .tab-btn.active {
      background: #b07b4c;
      color: white;
    }

    .tab-content {
      border: 1px solid #ddd;
      padding: 20px;
      background: white;
      border-radius: 0 6px 6px 6px;
    }

    .tab-pane {
      display: none;
    }

    .tab-pane.active {
      display: block;
    }

    #related-products {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 40px;
    }

    .related-card {
      background: #fff;
      padding: 10px;
      width: 200px;
      border-radius: 10px;
      text-align: center;
    }

    .related-card img {
      width: 100%;
      border-radius: 6px;
      height: 50%
    }

    .quick-view {
      display: inline-block;
      margin-top: 10px;
      color: #fff;
      background: #b07b4c;
      padding: 6px 12px;
      border-radius: 4px;
      text-decoration: none;
      cursor: pointer;
    }

    .star-rating {
      color: #b07b4c;
      font-size: 20px;
      margin-bottom: 10px;
    }

    /* Optional: global swatch class if not using inline styles */
    .swatch-container {
      margin-top: 5px;
    }

    .swatch {
      width: 20px;
      height: 20px;
      display: inline-block;
      margin-right: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="breadcrumbs" id="breadcrumb"></div>
    <hr style="border-top:1px solid #b07b4c;
               opacity: 0.8;
               margin: 20px 0;">
    <div class="product-section">
      <div class="product-images">
        <img id="main-image" src="" alt="Main Product Image" />
        <div id="thumbnails"></div>
      </div>
      <div class="product-info">
        <h2 id="product-name"></h2>
        <div class="price" id="product-price"></div>
        <div class="desc" id="product-desc"></div>
        <div class="desc" id="product-description"></div>
        <div class="star-rating" id="product-rating"></div>
        <button class="quick-view">Add to Cart</button>
      </div>
    </div>

    <div class="tabs">
      <div class="tab-buttons">
        <button class="tab-btn active" data-tab="desc-tab">Description</button>
        <button class="tab-btn" data-tab="info-tab">Additional Info</button>
        <button class="tab-btn" data-tab="review-tab">Reviews</button>
      </div>
      <div class="tab-content">
        <div id="desc-tab" class="tab-pane active">
          <p id="product-description-tabs"></p>
        </div>
        <div id="info-tab" class="tab-pane">

        </div>
        <div id="review-tab" class="tab-pane">
          <div class="star-rating">★★★★☆</div>
          <p>No reviews yet. Be the first to review this product!</p>
        </div>
      </div>
    </div>

    <h2 style="margin-top:60px;">Related Products</h2>
    <div id="related-products"></div>
  </div>
  
</body>

</html>